---
- debug:
    msg: "{{ dns_records_add|length }}"

- debug:
    msg: "{{ dns_records_rm|length }}"

- debug:
     msg: "{{ dns_records_rm.0.route53 }}"

- debug: var=dns_records_add.0.view

- debug: var=dns_records_rm.route53.view

#- debug: var=dns_records_add

#- debug: var=dns_records_rm

- import_tasks: pre-reqs.yml

- import_tasks: get-route53-zone-records.yml
  when:
    - dns_records_rm.0.route53 is defined

- import_tasks: loop-route53-records.yml
  when:
    - dns_records_rm.0.view is defined
    - dns_records_rm.0.route53 is defined

#- debug: var=hosted_zones

#- debug:
#    msg: "Hosted Zones: {{ item.Id | replace('/hostedzone/', '')}}"
  #with_items:
    #- "{{ hosted_zones.results[0].HostedZones | default({}) }}"
#- debug: var=hosted_zones

- debug: var=zones_records

- import_tasks: adm-zone-route53.yml
  when: (dns_records_rm.route53 is defined) or
        (dns_records_add.route53 is defined)

- import_tasks: adm-zone-named.yml
  when: (dns_records_rm.nsupdate is defined) or
        (dns_records_add.nsupdate is defined)
