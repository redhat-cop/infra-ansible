---

- name: "Set up default networks"
  os_network:
    project: "{{ item.project }}"
    external: "{{ item.external | default(omit) }}" 
    provider_network_type: "{{ item.provider_network_type | default(omit) }}"
    provider_physical_network: "{{ item.provider_physical_network | default(omit) }}"
    provider_segmentation_id: "{{ item.provider_segmentation_id | default(omit) }}"
    name: "{{ item.name }}"
  with_items:
  - "{{ osp_default_networks }}"

- name: "Set up default subnets"
  include: create-subnet.yml
  with_items:
  - "{{ osp_default_subnets }}"
  loop_control:
    loop_var: subnet
