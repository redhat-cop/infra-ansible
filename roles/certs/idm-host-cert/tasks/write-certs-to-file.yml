---

- name: "Write the Host Specific Certificate to a file"
  vars:
    cert_file_content: "{{ host_cert.json.result.result.certificate }}"
    cert_file_type: "CERTIFICATE"
  template:
    src: cert.j2
    dest: "{{ target_cert_files.host_cert }}"
  when:
  - target_cert_files.host_cert is defined
  - target_cert_files.host_cert|trim != ''

- name: "Write the CA Certificate to a file"
  vars:
    cert_file_content: "{{ ca_cert.json.result.result.certificate }}"
    cert_file_type: "CERTIFICATE"
  template:
    src: cert.j2
    dest: "{{ target_cert_files.intermediate_ca }}"
  when:
  - target_cert_files.intermediate_ca is defined
  - target_cert_files.intermediate_ca|trim != ''
