---

- name: "Set up router(s)"
  shell: >
    openstack router create {{ item.name }}
  with_items:
  - "{{ osp_routers | get_remaining_items(router_list_yaml, 'name', 'Name') }}"

- name: "Set up external interface for router(s)"
  shell: >
    openstack router set \
      --external-gateway "{{ item.external_gateway }}" \
      "{{ item.name }}"
  with_items:
  - "{{ osp_routers | get_remaining_items(router_list_yaml, 'name', 'Name') }}"

- name: "Set up subnet interface for router(s)"
  shell: >
    openstack router add subnet \
      "{{ item.name }}" \
      "{{ item.subnet }}"
  with_items:
  - "{{ osp_routers | get_remaining_items(router_list_yaml, 'name', 'Name') }}"
