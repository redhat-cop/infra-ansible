---
- name: Converge
  hosts: node
  roles:
    - role: config-timezone
  tasks:
    - name: Get Timezone
      shell:
        cmd: timedatectl show -p Timezone
      register: tz_data
    - debug:
        msg: "{{ tz_data.stdout | regex_replace('Timezone=') }}"
    - name: Verify system timezone matches inventory timezone
      assert:
        that:
          - timezone == tz_data.stdout | regex_replace('Timezone=')
