---

- name: Configure systemd environment files
  template:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
  notify: "Restart quay service"
  with_items:
    - { src: quay.j2, dest: "{{ systemd_environmenfile_dir}}/{{ quay_name }}" }
    - { src: "{{ database_type }}.j2", dest: "{{ systemd_environmenfile_dir}}/{{ database_type }}" }
    - { src: redis.j2, dest: "{{ systemd_environmenfile_dir}}/{{ redis_name }}" }

- name: Configure systemd unit files
  template:
    src: "{{ item.src }}"
    dest: "{{ item.dest }}"
  notify: "Restart quay service"
  with_items:
    - { src: quay.service.j2, dest: "{{ systemd_service_dir}}/{{ quay_service }}" }
    - { src: "{{ database_service }}.j2", dest: "{{ systemd_service_dir}}/{{ database_service }}" }
    - { src: redis.service.j2, dest: "{{ systemd_service_dir}}/{{ redis_service }}" }
