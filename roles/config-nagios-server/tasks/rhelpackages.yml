---
- name: "Enable optional repository required for Nagios install"
  rhsm_repository:
    name: "{{nagios_rhel7_optional_repo}}"
    state: enabled
  when: ansible_distribution_major_version == '7'

- name: "Install EPEL repository"
  yum:
    name: "{{nagios_epel_repo_url}}/{{nagios_epel_repo_rpm}}"
    state: present

- name: Install pre-requisite packages
  yum: 
    name: "{{ rhel_packages }}"
    state: latest

- name: Install pre-requisite packages
  yum: 
    name: "{{ rhel7_packages }}"
    state: latest
  when: ansible_distribution_major_version == '7'

- name: Install pre-requisite epel packages
  yum: 
    name: "{{ epel_packages }}"
    state: latest
